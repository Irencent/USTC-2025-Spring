"0","library(dplyr)"
"0","library(factoextra)"
"0",""
"0","df_2019 <- happiness_all %>%"
"0","  filter(Year == 2019) %>%"
"0","  select(Country, GDP, SocialSupport, Health, Freedom, Generosity, Trust) %>%"
"0","  drop_na()"
"0",""
"0","# 将国家名设为行名（仅用于聚类）"
"0","rownames(df_2019) <- df_2019$Country"
"2","G2;H2;Warningh: Setting row names on a tibble is deprecated.g
"
"0","data_for_cluster <- df_2019 %>% select(-Country)"
"0",""
"0","data_scaled <- scale(data_for_cluster)  # Z-score 标准化"
"0",""
"0","set.seed(42)  # 可重复性"
"0","k <- 4  # 设置分为4类（你可尝试 3、5、6 等）"
"0","kmeans_result <- kmeans(data_scaled, centers = k)"
"0",""
"0","# 将聚类结果加入原表格"
"0","df_2019$Cluster <- as.factor(kmeans_result$cluster)"
"0",""
"0","fviz_cluster(kmeans_result,"
"0","             data = data_scaled,"
"0","             geom = ""point"","
"0","             labelsize = 10,"
"0","             main = ""2019年国家幸福特征聚类"","
"0","             repel = TRUE)"
"0",""
