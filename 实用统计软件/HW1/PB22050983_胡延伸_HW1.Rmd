---
title: "PB22050983_胡延伸_HW1"
output: html_document
date: "2025-03-11"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## 数值型数据

1.  判断 `1L` 数据类型，并解释结果\
    数据类型为 integer, 如下面程序运行结果

    ```{r}
    x <- 1L
    typeof(x)
    ```

2.  计算log2sin(𝜋/3),向下取整，判断数据类型，并将最终结果转换为字符类型。

    ```{r}
    x <- floor(log2(sin(pi/3)))
    x
    typeof(x)
    as.character(x)
    ```

3.  分别使用`==`, `all.equal()`和`identical()`判断两者$\sqrt{3},\tan(\frac{\pi}{3})$是否相等，并解释结果。

    ```{r}
    sqrt(3) == tan(pi/3)
    all.equal(sqrt(3), tan(pi/3))
    identical(sqrt(3), tan(pi/3))
    ```

    使用 `==` 判断结果为 `FALSE` , 因为 `==` 严格比较值的大小（二进制表示）, 而计算机浮点数计算有精度误差。\
    使用 `all.equal()`结果为 `TRUE` ，因为这个函数允许有 `1e-8` 的误差。\
    使用 identical() 也是 `FALSE`, 因为它严格比较值的大小和类型。

4.  找出1:100中既能被2整除，也能被3整除的数。

    ```{r}
    (1:100)[(1:100) %% 2 == 0 & (1:100) %% 3 == 0]
    ```

## 字符型数据

1.  请把字符串`University of Science and Technology of China`中的’a’到’f’的所有字母删除。

    ```{r}
    org_str <- "University of Science and Technology of China"
    result <- gsub("[a-f]", "", org_str)
    result
    ```

2.  计算字符串`中国科学技术大学中的实用统计软件课程appstat2024`的长度，并提取字串`实用统计软件`。

    ```{r}
    string <- "中国科学技术大学中的实用统计软件课程appstat2024"
    length <- nchar(string)
    sub_string <- substr(string, 11, 16)
    length
    sub_string
    ```

3.  运行以下命令，并解释出现的结果。如果出错，请修正。

    c(1, 1, 2, 3, "1") + 2000

    ```{r}
    c(1, 1, 2, 3, 1) + 2000
    ```

4.  有字符串`x`定义如下，请把`x`按照字母进行拆分，并将结果转化成数值型变量。

    ```{r}
    x <- '1A3c5d'
    strsplit(x, "[a-zA-Z]")
    ```

## 日期时间类型数据

定义出生日期变量`date_bir`和发病日期变量`date_dis`如下：

```{r}
date_bir <- "1961/3/1"
date_dis <- "2022年1月1日"
```

1.  把上述变量分别转换成`Date` 和`POSIXct`日期型。

    ```{r}
    date_dis <- gsub("[年月日]", "-", date_dis)
    date_bir <- as.Date(date_bir)
    date_dis <- as.POSIXct(date_dis)
    date_bir
    date_dis
    ```

2.  输出出生年和月份。

    ```{r}
    format(date_bir, "%Y")
    format(date_bir, "%m")

    ```

3.  计算发病时的年龄，以周岁论，即过了生日才算；并通过`sink()`函数将发病年龄保存在`test.txt`文件中。

    ```{r}
    age <- ifelse(
      format(date_dis, "%m-%d") >= format(date_bir, "%m-%d"),
      as.numeric(format(date_dis, "%Y")) - as.numeric(format(date_bir, "%Y")),
      as.numeric(format(date_dis, "%Y")) - as.numeric(format(date_bir, "%Y")) - 1
    )
    age
    sink("test.txt")
    cat("发病年龄:", age, "周岁\n")
    sink()
    ```

4.  把`date_dis`中发病年月转换成`monyy`格式，这里`mon`是指如SEP的英文三字母缩写， `yy`是两数字的年份。

    ```{r}
    date_dis_monyy <- format(date_dis, "%b%y")
    date_dis_monyy
    ```

5.  从发病日开始计算，需要每隔一个星期进行复诊，请计算未来10次的复诊时间。

    ```{r}
    recheck_dates <- seq(
      from = as.Date(date_dis),
      by = "7 days",
      length.out = 10
    )
    recheck_dates
    ```
