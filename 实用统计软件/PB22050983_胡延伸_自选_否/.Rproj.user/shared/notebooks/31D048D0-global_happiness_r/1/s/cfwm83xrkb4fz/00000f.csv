"0","library(tidyverse)"
"0","library(stringr)"
"0",""
"0","file_list <- list.files(path = ""../data"", pattern = ""*.csv"", full.names = TRUE)"
"0",""
"0","happiness_all <- map_df(file_list, function(file_path) {"
"0","  df <- read.csv(file_path)"
"0","  year <- as.numeric(str_extract(file_path, ""\\d{4}""))"
"0","  "
"0","  # 标准化列"
"0","  df_standardized <- tibble("
"0","    Year = year,"
"0","    Country = coalesce(df$Country, df$Country.or.region),"
"0","    HappinessScore = coalesce(df$Happiness.Score, df$Score),"
"0","    GDP = coalesce(df$Economy..GDP.per.Capita., df$GDP.per.capita),"
"0","    SocialSupport = coalesce(df$Family, df$Social.support),"
"0","    Health = coalesce(df$Health..Life.Expectancy., df$Healthy.life.expectancy),"
"0","    Freedom = coalesce(df$Freedom, df$Freedom.to.make.life.choices),"
"0","    Generosity = df$Generosity,"
"0","    Trust = coalesce(df$Trust..Government.Corruption., df$Perceptions.of.corruption)"
"0","  )"
"0","  "
"0",""
"0","  # 将所有数值列转换为 numeric"
"0","  num_cols <- c(""HappinessScore"", ""GDP"", ""SocialSupport"", ""Health"", ""Freedom"", ""Generosity"", ""Trust"")"
"0","  df_standardized <- df_standardized %>%"
"0","    mutate(across(all_of(num_cols), as.numeric))"
"0",""
"0","  return(df_standardized)"
"0","})"
"2","G2;H2;Warningh: [38;5;232mThere was 1 warning in `mutate()`.[39m
[38;5;232m[36mℹ[38;5;232m In argument: `across(all_of(num_cols), as.numeric)`.[39m
Caused by warning:
[33m![39m NAs introduced by coerciong
"
