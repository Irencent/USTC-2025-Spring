"0","library(rnaturalearth)"
"0","library(rnaturalearthdata)"
"0","library(sf)"
"0","library(ggplot2)"
"0","library(dplyr)"
"0","# 世界地图（国家级，sf 格式）"
"0","world <- ne_countries(scale = ""medium"", returnclass = ""sf"")"
"0",""
"0","# 我们的聚类结果（2019 年，含 Cluster 列）"
"0","df_2019 <- df_2019 %>% select(Country, Cluster)"
"0",""
"0","# 合并地图和聚类信息（按国家名）"
"0","# 注意：world$name 是地图国家名"
"0","map_data <- world %>%"
"0","  left_join(df_2019, by = c(""name"" = ""Country""))"
"0",""
"0","missing <- df_2019$Country[!df_2019$Country %in% world$name]"
"0","#print(missing)"
"0",""
"0","df_2019$Country <- recode(df_2019$Country,"
"0","  ""United States"" = ""United States of America"","
"0","  ""Czech Republic"" = ""Czechia"","
"0","  ""Trinidad & Tobago"" = ""Trinidad and Tobago"","
"0","  ""Northern Cyprus"" = ""Cyprus"",  # 地图不单列北塞浦路斯"
"0","  ""Dominican Republic"" = ""Dominican Rep."","
"0","  ""Bosnia and Herzegovina"" = ""Bosnia and Herz."","
"0","  ""Ivory Coast"" = ""Côte d'Ivoire"","
"0","  ""Congo (Brazzaville)"" = ""Republic of the Congo"","
"0","  ""Palestinian Territories"" = ""Palestine"","
"0","  ""Congo (Kinshasa)"" = ""Democratic Republic of the Congo"","
"0","  ""Swaziland"" = ""Eswatini"",  # 改国名了"
"0","  ""Central African Republic"" = ""Central African Rep."","
"0","  ""South Sudan"" = ""S. Sudan"""
"0",")"
"0",""
"0","ggplot(map_data) +"
"0","  geom_sf(aes(fill = Cluster), color = ""white"") +"
"0","  scale_fill_brewer(palette = ""Set2"", na.value = ""grey90"") +"
"0","  labs(title = ""2019年全球幸福特征聚类地图"", fill = ""聚类类别"") +"
"0","  theme_minimal()"
"0",""
